// Prisma schema for Postgres-backed AI knowledge storage

generator client {
	provider = "prisma-client-js"
}

datasource db {
	provider = "postgresql"
	url      = env("DATABASE_URL")
}

model KnowledgeEntry {
	id          String   @id @default(cuid())
	title       String
	content     String
	keywords    String[]
	rating      Int      @default(4)
	usageCount  Int      @default(0)
	blocked     Boolean  @default(false)
	contentSha1 String
	createdAt   DateTime @default(now())
	updatedAt   DateTime @updatedAt

	@@index([title])
	@@unique([title, contentSha1])
}

model ExcellentResponse {
	id        String   @id @default(cuid())
	question  String
	answer    String
	createdAt DateTime @default(now())

	@@index([question])
}

model BlockedResponse {
	id        String   @id @default(cuid())
	question  String
	answer    String
	createdAt DateTime @default(now())

	@@index([question])
}

model Conversation {
	id        String   @id @default(cuid())
	question  String
	answer    String
	rating    Int?
	createdAt DateTime @default(now())
}

